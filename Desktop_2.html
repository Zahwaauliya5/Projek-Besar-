<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Ikan Belanak - Lautan Kita</title>
  <link rel="stylesheet" href="Desktop2style.css" />
</head>
<script>
window.onload = function() {
  // Ambil id produk dari URL
  const params = new URLSearchParams(window.location.search);
  const id = params.get("id");
  if (!id) return;

  // Ambil data produk dari localStorage
  const products = JSON.parse(localStorage.getItem("products") || "{}");
  const product = products[id];
  if (!product) return;

  // --- Bagian detail produk (seperti sebelumnya) ---
  // Ganti gambar produk
  const img = document.querySelector(".image-wrapper img");
  if (img) {
    img.src = product.image;
    img.alt = product.name;
  }

  // Ganti nama produk
  const nameEl = document.querySelector(".product-info h1");
  if (nameEl) nameEl.textContent = product.name;

  // Ganti harga
  const priceEl = document.querySelector(".product-info .price");
  if (priceEl) priceEl.textContent = "Rp. " + product.price.toLocaleString("id-ID") + "/kg";

  // Ganti stok
  const stockEl = document.querySelector(".product-info .stock");
  if (stockEl) stockEl.textContent = "Stok: " + product.stock + " kg";

  // Ganti deskripsi
  const descEl = document.querySelector(".description.info-card p");
  if (descEl) descEl.textContent = product.description;

  // Ganti penjual (seller)
  const sellerEl = document.querySelectorAll(".review-card .review-name")[0];
  if (sellerEl) sellerEl.textContent = product.seller || "-";

  // Ganti rating produk (rating yang di info kanan atas dan seller)
  const ratingEls = document.querySelectorAll(".rating");
  ratingEls.forEach((ratingEl, idx) => {
    let stars = "";
    let starValue = (idx === 2 && product.reviews && product.reviews[0]) ? product.reviews[0].rating : (product.rating || 4);
    for (let i = 0; i < 5; i++) {
      stars += i < starValue ? "★" : "☆";
    }
    ratingEl.textContent = stars;
  });

  // --- Bagian review pembeli ---
  // Card kedua adalah user review
  const userReviewCards = document.querySelectorAll('.review-card.info-card');
  if (userReviewCards.length > 1 && product.reviews && product.reviews.length > 0) {
    const firstReview = product.reviews[0];
    const userReviewCard = userReviewCards[1];

    // Gambar avatar user
    const avatar = userReviewCard.querySelector('.avatar');
    if (avatar) avatar.src = firstReview.avatar || "img/pembeli.png";

    // Nama user
    const reviewName = userReviewCard.querySelector('.review-name');
    if (reviewName) reviewName.textContent = firstReview.user || "-";

    // Komentar user
    const reviewText = userReviewCard.querySelector('.review-text');
    if (reviewText) reviewText.textContent = firstReview.comment || "";

    // Gambar review (hasil tangkapan)
    const reviewImg = userReviewCard.querySelector('.review-img');
    if (reviewImg && firstReview.img) reviewImg.src = firstReview.img;

    // Rating bintang user
    const reviewRating = userReviewCard.querySelector('.rating');
    if (reviewRating) {
      let stars = "";
      for (let i = 0; i < 5; i++) {
        stars += i < (firstReview.rating || 4) ? "★" : "☆";
      }
      reviewRating.textContent = stars;
    }
  }
};
</script>
<body>
  <div class="container">
    <a class="back-button" href="home_final.html">⬅️</a>

    <section class="product-section">
      <div class="image-wrapper">
        <img src="img/ikan belanak 2.png" alt="Ikan Belanak" />
      </div>

      <!-- INFO + ACTION ROW -->
      <div class="product-info">
        <div class="info-header">
          <div class="info-left">
            <h1>Ikan Belanak</h1>
            <p class="price">Rp. 40.000/kg</p>
            <p class="stock">Stok: 15 kg</p>
          </div>
          <div class="info-right">
            <div class="rating">★★★★★</div>
            <div class="actions">
              
            <a href="keranjang.html" class="cart-button">🛒</a>
            <a href="checkout.html" class="buy-button">Beli Sekarang</a>

        </div>
          </div>
        </div>
      </div>

      <!-- DESCRIPTION -->
      <div class="description info-card">
        <h3>Deskripsi Produk</h3>
        <p>Ikan belanak segar hasil tangkapan nelayan lokal. Cocok untuk berbagai jenis masakan khas Indonesia.</p>
        <ul>
          <li>Status: Tersedia</li>
          <li>Kategori: Ikan Laut</li>
        </ul>
        <h4>Spesifikasi:</h4>
        <ul>
          <li>Ukuran: Sedang</li>
          <li>Berat: ±500g per ekor</li>
          <li>Asal: Laut Natuna</li>
          <li>Penyimpanan: Simpan dalam suhu 0–4°C</li>
        </ul>
        <p>🚚 Siap Kirim! Kami siap melayani pengiriman cepat.</p>
      </div>

      <!-- SELLER REVIEW -->
      <div class="review-card info-card">
        <div class="card-header">
          <img src="img/penjual.png" alt="Pak Joko" class="avatar" />
          <div class="review-meta">
            <strong class="review-name">Budi fisherman</strong>
            <p class="review-text">Penjual terpercaya selama 5 tahun</p>
            <button class="visit-button">Kunjungi</button>
          </div>
          <div class="rating">★★★★★</div>
        </div>
      </div>

      <!-- USER REVIEW -->
      <div class="review-card info-card">
        <div class="card-header">
          <img src="img/pembeli.png" alt="Santi" class="avatar" />
          <div class="review-meta">
            <strong class="review-name">Santi</strong>
            <p class="review-text">
              Ikan belanaknya benar-benar segar! Dagingnya masih kenyal dan tidak berbau amis.<br>
              Rasanya enak sekali setelah digoreng. Terima kasih, Pak Nelayan! Pasti beli lagi!
            </p>
          </div>
          <div class="rating">★★★★★</div>
        </div>
        <div class="review-body">
          <img src="img/ikan-belanak.png" alt="Ikan Segar" class="review-img" />
        </div>
      </div>

    </section>
    </div>

  <footer>
    <div class="footer-container">
      <div class="footer-left">
        <h4>Lautan Kita</h4>
        <p>
          Lautan Kita adalah platform digital inovatif yang menghubungkan nelayan lokal langsung dengan konsumen dan bisnis, menyediakan produk laut segar, transparan, dan berkelanjutan.
        </p>
        
        <div class="footer-nav">
          <h5><a href="home_final.html" class="footer-link">Beranda</a></h5>
          <h5><a href="keranjang.html" class="footer-link">Keranjang</a></h5>
          <h5><a href="pusat_bantuan.html" class="footer-link">Pusat Bantuan</a></h5>
        </div>                      
      </div>
      <div class="footer-right">
        <h4>Kontak Kami:</h4>
        <p>📸 @lautankita</p>
        <p>🎵 @lautankita</p>
        <p>📞 +62 811 1234 5678</p>
        <p>✉️ lautankita@gmail.com</p>
        <h4>Alamat:</h4>
        <p>📍 Ganet, BT 11, Tanjung Pinang Timur, Tanjung Pinang, Kepulauan Riau</p>
      </div>
    </div>
    <p class="copyright">© 2025 Lautan Kita. All rights reserved</p>
  </footer>
</body>
</html>