<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Ikan Belanak - Lautan Kita</title>
    <link rel="stylesheet" href="Desktop2style.css" />
</head>
<body>
    <div class="container">
        <a class="back-button" href="home_final.html">‚¨ÖÔ∏è</a>

        <section class="product-section">
            <div class="image-wrapper">
                <img src="img/ikan-belanak.png" alt="Ikan Belanak" />
            </div>

            <div class="product-info">
                <div class="info-header">
                    <div class="info-left">
                        <h1>Ikan Belanak</h1>
                        <p class="price">Rp. 40.000/kg</p>
                        <p class="stock">Stok: 15 kg</p>
                    </div>
                    <div class="info-right">
                        <div class="rating">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
                        <div class="actions">
                            <a href="keranjang.html" class="cart-button">üõí</a>
                            <a href="checkout.html" class="buy-button">Beli Sekarang</a>
                        </div>
                    </div>
                </div>
            </div>

            <div class="description info-card">
                <h3>Deskripsi Produk</h3>
                <p>Ikan belanak segar hasil tangkapan nelayan lokal. Cocok untuk berbagai jenis masakan khas Indonesia.</p>
                <ul>
                    <li>Status: Tersedia</li>
                    <li>Kategori: Ikan Laut</li>
                </ul>
                <h4>Spesifikasi:</h4>
                <ul>
                    <li>Ukuran: Sedang</li>
                    <li>Berat: ¬±500g per ekor</li>
                    <li>Asal: Laut Natuna</li>
                    <li>Penyimpanan: Simpan dalam suhu 0‚Äì4¬∞C</li>
                </ul>
                <p>üöö Siap Kirim! Kami siap melayani pengiriman cepat.</p>
            </div>

            <div class="review-card info-card seller-review-display">
                <div class="card-header">
                    <img src="img/penjual.png" alt="Pak Budi" class="avatar" />
                    <div class="review-meta">
                        <strong class="review-name">Budi Fisherman</strong>
                        <p class="review-text">Penjual terpercaya selama 5 tahun</p>
                        <button class="visit-button">Kunjungi</button>
                    </div>
                    <div class="rating">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
                </div>
            </div>

            <div class="review-card info-card user-review-display">
                <div class="card-header">
                    <img src="img/pembeli.png" alt="Santi" class="avatar" />
                    <div class="review-meta">
                        <strong class="review-name">Santi</strong>
                        <p class="review-text">
                            Ikan belanaknya benar-benar segar! Dagingnya masih kenyal dan tidak berbau amis.<br>
                            Rasanya enak sekali setelah digoreng. Terima kasih, Pak Nelayan! Pasti beli lagi!
                        </p>
                    </div>
                    <div class="rating">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
                </div>
                <div class="review-body">
                    <img src="img/ikan-belanak.png" alt="Ikan Segar" class="review-img" />
                </div>
            </div>

        </section>
    </div>

    <footer>
        <div class="footer-container">
            <div class="footer-left">
                <h4>Lautan Kita</h4>
                <p>
                    Lautan Kita adalah platform digital inovatif yang menghubungkan nelayan lokal langsung dengan konsumen dan bisnis, menyediakan produk laut segar, transparan, dan berkelanjutan.
                </p>

                <div class="footer-nav">
                    <h5><a href="home_final.html" class="footer-link">Beranda</a></h5>
                    <h5><a href="keranjang.html" class="footer-link">Keranjang</a></h5>
                    <h5><a href="pusat_bantuan.html" class="footer-link">Pusat Bantuan</a></h5>
                </div>
            </div>
            <div class="footer-right">
                <h4>Kontak Kami:</h4>
                <p>üì∏ @lautankita</p>
                <p>üéµ @lautankita</p>
                <p>üìû +62 811 1234 5678</p>
                <p>‚úâÔ∏è lautankita@gmail.com</p>
                <h4>Alamat:</h4>
                <p>üìç Ganet, BT 11, Tanjung Pinang Timur, Tanjung Pinang, Kepulauan Riau</p>
            </div>
        </div>
        <p class="copyright">¬© 2025 Lautan Kita. All rights reserved</p>
    </footer>

    <script>
                // SALIN SEMUA KODE DI BAWAH INI
        window.onload = function() {
            // 1. Ambil ID produk dari URL
            const params = new URLSearchParams(window.location.search);
            const id = params.get("id");

            // Jika tidak ada ID di URL, kembali ke halaman utama
            if (!id) {
                window.location.href = 'home_final.html';
                return;
            }

            // 2. Ambil semua data produk dari localStorage
            const products = JSON.parse(localStorage.getItem("products") || "{}");
            const product = products[id];

            // Jika produk dengan ID tersebut tidak ditemukan, kembali ke halaman utama
            if (!product) {
                alert('Produk tidak ditemukan!');
                window.location.href = 'home_final.html';
                return;
            }

            // 3. Update semua elemen di halaman dengan data produk yang benar
            
            // Judul Tab Browser
            document.title = `${product.name} - Lautan Kita`;

            // Gambar Utama Produk
            document.querySelector(".image-wrapper img").src = product.image;
            document.querySelector(".image-wrapper img").alt = product.name;

            // Info Produk
            document.querySelector(".product-info h1").textContent = product.name;
            document.querySelector(".product-info .price").textContent = "Rp. " + product.price.toLocaleString("id-ID") + "/kg";
            document.querySelector(".product-info .stock").textContent = "Stok: " + product.stock + " kg";
            
            // Rating Bintang Produk
            const productRatingEl = document.querySelector(".info-right .rating");
            let productStars = "";
            for (let i = 0; i < 5; i++) {
                productStars += i < product.rating ? "‚òÖ" : "‚òÜ";
            }
            productRatingEl.textContent = productStars;

            // Deskripsi Produk
            document.querySelector(".description.info-card p").textContent = product.description;

            // Info Penjual
            document.querySelector(".seller-review-display .review-name").textContent = product.seller;

            // =================================================================
            // 4. INI BAGIAN PALING PENTING: Mengatur Tampilan Review Pengguna
            // =================================================================

            const userReviewCard = document.querySelector(".user-review-display");
            
            // Cek apakah produk ini punya data review dan isinya tidak kosong
            if (product.reviews && product.reviews.length > 0) {
                // Jika ADA review, ambil data review pertama
                const review = product.reviews[0];

                // Tampilkan kartu review (jaga-jaga jika sebelumnya disembunyikan)
                userReviewCard.style.display = 'block';

                // Ganti isi kartu review dengan data yang benar
                userReviewCard.querySelector(".avatar").src = review.avatar || "img/pembeli.png"; // Pakai gambar default jika tidak ada
                userReviewCard.querySelector(".review-name").textContent = review.user;
                userReviewCard.querySelector(".review-text").innerHTML = review.comment; // Pakai innerHTML untuk jaga-jaga ada tag <br>
                
                // Atur rating bintang untuk review
                const reviewRatingEl = userReviewCard.querySelector('.rating');
                let reviewStars = "";
                for (let i = 0; i < 5; i++) {
                    reviewStars += i < review.rating ? "‚òÖ" : "‚òÜ";
                }
                reviewRatingEl.textContent = reviewStars;

                // Atur gambar di dalam review
                const reviewImgEl = userReviewCard.querySelector('.review-img');
                if (review.img) {
                    reviewImgEl.src = review.img;
                    reviewImgEl.style.display = 'block'; // Tampilkan elemen gambar
                } else {
                    reviewImgEl.style.display = 'none'; // Sembunyikan jika tidak ada gambar review
                }

            } else {
                // Jika TIDAK ADA review, sembunyikan seluruh blok kartu review pengguna
                userReviewCard.style.display = 'none';
                
                // OPSI LAIN: jika ingin menampilkan pesan, ganti baris di atas dengan ini:
                // userReviewCard.innerHTML = '<h3>Ulasan Pembeli</h3><p>Belum ada ulasan untuk produk ini.</p>';
            }
        };
    </script>
</body>
</html>